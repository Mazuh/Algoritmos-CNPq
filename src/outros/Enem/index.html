<!DOCTYPE html>
<html lang="pt-br">

    <head>
        <meta charset="utf-8"/>
        <title>Estudo ENEM</title>
    </head>

    <!-- Alg de impressão de dados no painel. -->
    <script type="text/javascript" src="enem.js"></script>
    <script type="text/javascript">

        // variável global
        const N_SEMANAS = 15;
        
        /*
        Lista no painel os assuntos da semana solicitada via form.
        */
        function exibir(){

            // INPUT
            var nSemana = document.getElementById("semana").value;
            
            // limpa campo digitado
            document.getElementById("semana").value = "";
            
            // Checagens
            // ps: checagens em js podem ser redundantes
            // graças ao html 5
            
            // checagem de tipo recebido
            if (nSemana === ""){
                alert("O campo 'semana' é obrigatório.");
                return;
            }
            
            // checagem de limites seguros de consulta
            if (nSemana < 1){ // min
                nSemana = 1;
                alert("O primeira semana é a nº 1!");
            } else if (nSemana > N_SEMANAS){ // max
                nSemana = N_SEMANAS;
                alert("A última semana é a nº 15!");
            }
            
            
            // get dom obj
            var painel = document.getElementById("painel");

            // OUTPUT
            // número da semana
            // depois da saída, n(umero da )Semana é decrescido
            // pra virar índice de vetor.
            painel.innerHTML = (
                "<h3 style='border-bottom: 1px solid white'>"
                + "Semana nº " + nSemana-- + "</h3>"
            );
            // percorrendo array de disciplinas
            for(var i = 0; i < disciplinas.length; i++){
                // nome da disciplina atual
                painel.innerHTML += (
                    "<h4>" 
                    + disciplinas[i].nome 
                    + ":</h4>"
                );
                // conteúdo da semana atual (índice == var nSemana)
                painel.innerHTML += (
                    "<p>" 
                    + disciplinas[i].conteudos[nSemana] 
                    + "</p>"
                );
            }
            
            // Indo até o painel.
            // Autobots, roll out!
            painel.scrollIntoView();

        }

    </script>

    <!-- Sou um puta designer, né, não? -->
    <style type="text/css">
        *{
            background-color: darkgray;
        }

        html{
            background-color: beige;
        }

        body{
            background-color: beige;
            padding: 2px;
        }

        h1{
            color: darkblue;
            text-align: center;
        }
        
        h2{
            color: black;
        }
        
        h3{
            color: blue;
        }
        
        h4{
            color: red;
        }
        
        #tudo{
            width: 650px;
            margin: auto;
            padding: 6px;
            box-shadow: 2px 2px 5px black;
        }

        .bordado{
            border: 1px solid black;
            padding: 5px;
        }
    </style>

    <body>
        <div id="tudo">

            <!-- Cabeçalho mega estiloso -->
            <h1>Meu estudo semanal do ENEM</h1>
            <h2>Data do exame: 24 e 25 de outubro de 2015.</h2>
            <h2>
                Faltam 
                <script>

                    /*
                    Mostra quantidade semanas dias
                    restantes até a 1a prova do Enem!
                    */

                    // transformando datas em ms
                    // ps: mês -1 porque é o .month vai de 0 a 11.
                    var msEnem = Date.parse(new Date("24 oct 2015"));
                    var msHoje = Date.parse(new Date());

                    // verificando diferença entre os tempos em ms
                    var tempoAteEnem = msEnem - msHoje;
                    // conversão de ms, s, min e horas até dias
                    tempoAteEnem = tempoAteEnem/1000/60/60/24;

                    // antes de converter pra semanas, quantos dias
                    // restarão além das semanas?
                    var diasAlemDasSemanas = tempoAteEnem % 7;

                    // convertendo de dias até semanas.
                    tempoAteEnem = tempoAteEnem / 7;

                    // output
                    // casas decimais são semanas 'quebradas': dias
                    document.write(parseInt(tempoAteEnem));
                    document.write(" semanas e ");

                    // ceil() pra fechar ao maior inteiro.
                    // ex: se hoje é 12h AM da véspera da prova,
                    // posso considerar que ainda resta 1 dia int
                    // (apesar de não ser verdade, pois 1d = 24h int)
                    document.write(Math.ceil(diasAlemDasSemanas));
                    document.write(" dias ");

                </script>
                para a 1ª prova!
            </h2>
            <br/>

            <!-- Form de opções. -->
            <form class="bordado" 
                  onsubmit="
                            javascript:exibir();
                            return false;
                            ">
                
                <h3>Ver quais conteúdos da semana</h3>

                <label>Semana:</label>
                <input type="number"
                       id="semana"
                       autofocus
                       required/>

                <button type="button" onclick="exibir()">
                    Exibir
                </button>
            </form>

            <br/><br/>

            <!-- Painel com disciplinas e matérias da semana. -->
            <div id="painel" class="bordado">
                <!-- O .innerHTML é gerado via função js da head. -->
            </div>
            
            <br/><br/>
            
            <!-- copyright -->
            <footer style="text-align: center">
                Copyright 2015 - Marcell Guilherme
                (marcell-mz@hotmail.com)
            </footer>
            
        </div>
    </body>

</html>
